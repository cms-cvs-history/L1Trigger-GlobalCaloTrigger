# writeGctDigis.cfg
#
# J Brooke 9/07/07
#
# Create RCT/GCT digis from trigger primitive digis and write to file
# Recommended for use with a RelVal file as input
#

process writeGctDigis  = {

  include "FWCore/MessageLogger/data/MessageLogger.cfi"
 
  source = PoolSource {
    untracked vstring fileNames = {
      'file:single_e_pt35.root'
    }
  }

  untracked PSet maxEvents = { untracked int32 input = 10 }

  # Geometry
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
  include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"

  # include L1 emulator
  include "L1Trigger/Configuration/data/L1CaloEmulator.cff"

  module test = L1GctTestAnalyzer { 
    untracked InputTag rawInput  = none
    untracked InputTag emuInput  = gctDigis
    untracked string outFile     = "writeGctDigis.txt"
    untracked bool doHardware    = false
    untracked bool doEmulated    = true
    untracked bool doRctEm       = false
    untracked bool doInternEm    = false
    untracked bool doEm          = true
    untracked bool doJets        = false
    untracked uint32 rctEmMinRank = 0
  }

  path p = { l1calo, test }

  # write out Root file
  module outputEvents = PoolOutputModule {
    untracked vstring outputCommands = {
      "drop *",
      "keep *_ecalTriggerPrimitiveDigis_*_*",
      "keep *_hcalTriggerPrimitiveDigis_*_*",
      "keep *_rctDigis_*_*",
      "keep *_gctDigis_*_*"
      }
      untracked string fileName = "writeGctDigis.root"
  }

  endpath outpath = { outputEvents }

}

